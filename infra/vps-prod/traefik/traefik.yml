<<<<<< claude/setup-devops-infrastructure-011L1XNFBgxcqdLGbXCim1bi
################################################################################
# Configuration Traefik v3 - Prolex Production
# Reverse proxy avec gÃ©nÃ©ration automatique de certificats SSL
################################################################################

################################################################################
# API et Dashboard
################################################################################
api:
  # Active le dashboard Traefik (Ã  dÃ©sactiver en production ou protÃ©ger)
  dashboard: false
  # Active l'API
  insecure: false

################################################################################
# Points d'entrÃ©e (Entrypoints)
################################################################################
entryPoints:
  # Point d'entrÃ©e HTTP (port 80)
  web:
    address: ":80"
    # Redirection automatique HTTP -> HTTPS (optionnel, peut aussi Ãªtre fait par les labels)
======
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ðŸŒ TRAEFIK - Configuration statique
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# Ce fichier configure Traefik en tant que reverse proxy avec :
#   - DÃ©tection automatique des conteneurs Docker
#   - GÃ©nÃ©ration automatique des certificats SSL via Let's Encrypt
#   - Redirection HTTP â†’ HTTPS
#
# Documentation : https://doc.traefik.io/traefik/
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸšª ENTRY POINTS - Points d'entrÃ©e rÃ©seau
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# DÃ©finit les ports sur lesquels Traefik Ã©coute.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

entryPoints:
  # Port 80 - HTTP
  web:
    address: ":80"
    # Redirection automatique HTTP â†’ HTTPS
>>>>>> main
    http:
      redirections:
        entryPoint:
          to: websecure
          scheme: https
          permanent: true

<<<<<< claude/setup-devops-infrastructure-011L1XNFBgxcqdLGbXCim1bi
  # Point d'entrÃ©e HTTPS (port 443)
======
  # Port 443 - HTTPS
>>>>>> main
  websecure:
    address: ":443"
    http:
      tls:
<<<<<< claude/setup-devops-infrastructure-011L1XNFBgxcqdLGbXCim1bi
        certResolver: letsencrypt

################################################################################
# Providers - DÃ©couverte automatique des services
################################################################################
providers:
  # Docker provider - dÃ©couverte automatique des conteneurs
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false  # N'expose que les services avec traefik.enable=true
    network: traefik-public  # RÃ©seau Docker par dÃ©faut pour Traefik
    watch: true              # Surveille les changements en temps rÃ©el

  # File provider - pour des configurations statiques (optionnel)
  # file:
  #   directory: /etc/traefik/dynamic
  #   watch: true

################################################################################
# Certificats SSL - Let's Encrypt
################################################################################
certificatesResolvers:
  letsencrypt:
    acme:
      # Email pour les notifications Let's Encrypt
      email: ${LETSENCRYPT_EMAIL:-admin@example.com}
      # Fichier de stockage des certificats
      storage: /acme.json
      # Challenge HTTP (recommandÃ© pour la plupart des cas)
      httpChallenge:
        entryPoint: web

      # Alternative: DNS Challenge (pour certificats wildcard)
      # DÃ©commentez et configurez si vous avez besoin de certificats wildcard
      # dnsChallenge:
      #   provider: cloudflare
      #   resolvers:
      #     - "1.1.1.1:53"
      #     - "8.8.8.8:53"

################################################################################
# Logs
################################################################################
log:
  # Niveau de log (DEBUG, INFO, WARN, ERROR, FATAL, PANIC)
  level: INFO
  # Format (json ou common)
  format: common

# Logs d'accÃ¨s
accessLog:
  # Active les logs d'accÃ¨s
  enabled: true
  # Format (json ou common)
  format: common
  # Filtres (optionnel)
  filters:
    statusCodes:
      - "200-299"
      - "400-499"
      - "500-599"
    retryAttempts: true
    minDuration: "10ms"

################################################################################
# Options globales
################################################################################
global:
  # VÃ©rification des nouvelles versions de Traefik
  checkNewVersion: true
  # Envoi de statistiques anonymes
  sendAnonymousUsage: false

################################################################################
# Ping endpoint (healthcheck)
################################################################################
ping:
  entryPoint: "web"
=======
        # Activation du TLS (SSL)
        certResolver: letsencrypt

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ”Œ PROVIDERS - Sources de configuration dynamique
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Traefik dÃ©tecte automatiquement les conteneurs Docker via labels.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

providers:
  docker:
    # Activer le provider Docker
    endpoint: "unix:///var/run/docker.sock"

    # Exposer les conteneurs uniquement si le label traefik.enable=true est prÃ©sent
    exposedByDefault: false

    # RÃ©seau Docker Ã  utiliser (doit correspondre au rÃ©seau dans docker-compose.yml)
    network: prolex-network

    # Surveiller les changements en temps rÃ©el
    watch: true

  # Configuration depuis des fichiers (optionnel, pour config avancÃ©e)
  # file:
  #   directory: "/etc/traefik/dynamic"
  #   watch: true

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ” CERTIFICATS SSL - Let's Encrypt (ACME)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# GÃ©nÃ©ration et renouvellement automatique des certificats SSL.
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

certificatesResolvers:
  letsencrypt:
    acme:
      # Email pour les notifications Let's Encrypt (expirations, problÃ¨mes)
      # âš ï¸ IMPORTANT : Remplacer par un email valide
      email: "mon-email@exemple.com"

      # Fichier de stockage des certificats
      storage: "/letsencrypt/acme.json"

      # Challenge HTTP (via port 80)
      # Alternative : tlsChallenge (via port 443) ou dnsChallenge (via DNS)
      httpChallenge:
        entryPoint: web

      # ENVIRONNEMENT DE TEST (dÃ©commenter pour tester sans limites de rate)
      # âš ï¸ Les certificats gÃ©nÃ©rÃ©s en staging ne sont pas valides !
      # Utile pour tester la config avant de passer en production.
      # caServer: "https://acme-staging-v02.api.letsencrypt.org/directory"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ“Š API & DASHBOARD - Interface d'administration (DÃ‰SACTIVÃ‰)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Le dashboard est dÃ©sactivÃ© par dÃ©faut pour des raisons de sÃ©curitÃ©.
# Pour l'activer, dÃ©commenter les lignes ci-dessous ET ajouter une
# authentification (BasicAuth recommandÃ©).
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

api:
  # Dashboard dÃ©sactivÃ© par dÃ©faut
  dashboard: false

  # API interne dÃ©sactivÃ©e
  insecure: false

# Pour activer le dashboard de maniÃ¨re sÃ©curisÃ©e :
# 1. DÃ©commenter ci-dessous
# 2. Ajouter les labels dans docker-compose.yml (voir commentaires)
# 3. GÃ©nÃ©rer un mot de passe BasicAuth :
#    htpasswd -nb admin votre_mot_de_passe
#
# api:
#   dashboard: true
#   insecure: false

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ“ LOGS - Journalisation
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

log:
  # Niveau de log : DEBUG, INFO, WARN, ERROR
  level: INFO

  # Fichier de log (optionnel, sinon stdout)
  # filePath: "/var/log/traefik/traefik.log"

  # Format : json ou common
  format: json

# Logs d'accÃ¨s (optionnel, pour voir toutes les requÃªtes)
accessLog:
  # Activer les logs d'accÃ¨s
  # filePath: "/var/log/traefik/access.log"
  format: json

  # Filtres pour ne logger que certaines requÃªtes (optionnel)
  # filters:
  #   statusCodes:
  #     - "400-499"
  #     - "500-599"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ”’ SÃ‰CURITÃ‰ - Options globales
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

# Options TLS globales (optionnel, pour renforcer la sÃ©curitÃ©)
# tls:
#   options:
#     default:
#       minVersion: VersionTLS12
#       cipherSuites:
#         - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
#         - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
#         - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ”§ OPTIONS GLOBALES
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

global:
  # DÃ©sactiver la vÃ©rification des mises Ã  jour (optionnel)
  checkNewVersion: false

  # DÃ©sactiver l'envoi de statistiques anonymes Ã  Traefik Labs
  sendAnonymousUsage: false
>>>>>> main
