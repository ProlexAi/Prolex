# Configuration des workflows Opex v4
# Distinction entre workflows CORE (MVP) et LATER (post-MVP)
# Derni√®re mise √† jour : 22/11/2025

# Workflows CORE - Prioritaires pour MVP v4.0
core_workflows:
  # Famille 100 - Productivit√©
  - id: 100_10_TASK_CREATE
    name: "Cr√©er une t√¢che"
    description: "Cr√©ation d'une nouvelle t√¢che dans le syst√®me de gestion"
    status: ‚è≥ En cours
    priority: HIGH
    autonomy_level: 2
    estimated_completion: "25/11/2025"

  - id: 100_20_TASK_LIST
    name: "Lister les t√¢ches"
    description: "R√©cup√©ration de la liste des t√¢ches avec filtres"
    status: ‚è≥ En cours
    priority: HIGH
    autonomy_level: 1
    estimated_completion: "24/11/2025"

  # Famille 400 - Syst√®me & Logs
  - id: 400_10_LOG_APPEND_SYSTEMJOURNAL
    name: "Ajouter entr√©e au SystemJournal"
    description: "Ajout d'une entr√©e de log dans le journal syst√®me centralis√©"
    status: ‚è≥ En cours
    priority: CRITICAL
    autonomy_level: 1
    estimated_completion: "23/11/2025"

  # Famille 600 - Orchestration
  - id: 600_10_PROXY_MASTER
    name: "Proxy Master (ex√©cution plans)"
    description: "Orchestrateur principal pour l'ex√©cution des plans multi-outils"
    status: ‚è≥ En cours
    priority: CRITICAL
    autonomy_level: 2
    estimated_completion: "26/11/2025"
    notes: "N√©cessite impl√©mentation de la r√©solution robuste de variables"

# Workflows LATER - Post-MVP (v4.1+)
later_workflows:
  # Famille 100 - Productivit√© (√©tendu)
  - id: 100_30_TASK_UPDATE
    name: "Mettre √† jour une t√¢che"
    status: üí° Vision
    priority: MEDIUM
    target_version: "v4.1"

  - id: 100_40_TASK_DELETE
    name: "Supprimer une t√¢che"
    status: üí° Vision
    priority: LOW
    target_version: "v4.1"

  # Famille 200 - Dev & GitHub
  - id: 200_10_GITHUB_ISSUE_CREATE
    name: "Cr√©er une issue GitHub"
    status: üí° Vision
    priority: MEDIUM
    autonomy_level: 2
    target_version: "v4.1"

  - id: 200_20_GITHUB_PR_CREATE
    name: "Cr√©er une pull request GitHub"
    status: üí° Vision
    priority: MEDIUM
    autonomy_level: 2
    target_version: "v4.2"

  - id: 200_30_GITHUB_PR_MERGE
    name: "Merger une pull request"
    status: üí° Vision
    priority: LOW
    autonomy_level: 3
    target_version: "v4.2"

  # Famille 300 - Clients & Projets
  - id: 300_10_CLIENT_INFO_GET
    name: "R√©cup√©rer infos client"
    status: üí° Vision
    priority: MEDIUM
    autonomy_level: 1
    target_version: "v4.1"

  - id: 300_20_CLIENT_PIPELINE_UPDATE
    name: "Mettre √† jour pipeline client"
    status: üí° Vision
    priority: MEDIUM
    autonomy_level: 2
    target_version: "v4.2"

  # Famille 400 - Syst√®me (√©tendu)
  - id: 400_20_LOG_SEARCH
    name: "Rechercher dans les logs"
    status: üí° Vision
    priority: MEDIUM
    autonomy_level: 1
    target_version: "v4.1"

  - id: 400_30_BACKUP_RUN
    name: "Lancer un backup"
    status: üí° Vision
    priority: HIGH
    autonomy_level: 3
    target_version: "v4.2"

  # Famille 500 - Reporting
  - id: 500_10_REPORT_DAILY
    name: "G√©n√©rer rapport quotidien"
    status: üí° Vision
    priority: LOW
    autonomy_level: 1
    target_version: "v4.2"

  - id: 500_20_REPORT_CLIENT
    name: "G√©n√©rer rapport client"
    status: üí° Vision
    priority: MEDIUM
    autonomy_level: 1
    target_version: "v4.2"

  # Famille 600 - Orchestration (√©tendu)
  - id: 600_20_HIGH_RISK_APPROVAL
    name: "Validation d'actions √† risque"
    status: ‚è≥ En cours
    priority: HIGH
    autonomy_level: 2
    target_version: "v4.0"
    notes: "Impl√©mentation clickable via webhooks"

  - id: 600_30_N8N_WORKFLOW_UPSERT_SBX
    name: "Cr√©er/modifier workflow en sandbox"
    status: ‚è≥ En cours
    priority: HIGH
    autonomy_level: 2
    target_version: "v4.0"

  - id: 600_40_N8N_WORKFLOW_PROMOTE_PROD
    name: "Promouvoir workflow sandbox ‚Üí prod"
    status: üí° Vision
    priority: HIGH
    autonomy_level: 3
    target_version: "v4.1"

# M√©triques MVP
mvp_metrics:
  total_workflows_planned: 34
  core_workflows_count: 4
  core_workflows_percentage: 12%
  estimated_mvp_completion_date: "26/11/2025"

# R√®gles de prioritisation
prioritization_rules:
  - "CRITICAL : Workflows n√©cessaires au fonctionnement de base de Prolex"
  - "HIGH : Workflows essentiels pour cas d'usage MVP"
  - "MEDIUM : Workflows utiles mais pas bloquants"
  - "LOW : Workflows de confort ou optimisation"

# D√©pendances inter-workflows
dependencies:
  - workflow: 600_10_PROXY_MASTER
    depends_on:
      - 400_10_LOG_APPEND_SYSTEMJOURNAL
    reason: "Proxy Master doit logger toutes ses actions"

  - workflow: 600_20_HIGH_RISK_APPROVAL
    depends_on:
      - 400_10_LOG_APPEND_SYSTEMJOURNAL
    reason: "Les validations doivent √™tre trac√©es"

  - workflow: 600_40_N8N_WORKFLOW_PROMOTE_PROD
    depends_on:
      - 600_30_N8N_WORKFLOW_UPSERT_SBX
    reason: "On ne peut promouvoir que ce qui existe en sandbox"
