# CASH WORKFLOWS â€” ZONE INTERDITE Ã€ PROLEX
# ==========================================
# Date de verrouillage: 2025-11-22
# AutoritÃ©: Matthieu (Automatt.ai)
# Version: 1.0

# ğŸš¨ RÃˆGLE ABSOLUE ğŸš¨
# Prolex n'a PLUS LE DROIT de :
# - CrÃ©er
# - Modifier
# - Supprimer
# - DÃ©clencher manuellement
# - RÃ©parer
# - Analyser
# - Proposer une amÃ©lioration
#
# des workflows listÃ©s ci-dessous

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# WORKFLOWS INTERDITS (liste exhaustive)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

forbidden_workflows:
  # Lead Generation & Prospection
  - file: "200_leadgen_li_mail.json"
    name: "Lead Generation LinkedIn + Email"
    category: "sales"
    revenue_impact: "high"
    reason: "Workflow critique de gÃ©nÃ©ration de leads"

  # Proposition Commerciale Automatique
  - file: "250_proposal_auto.json"
    name: "Proposition Commerciale Automatique"
    category: "sales"
    revenue_impact: "critical"
    reason: "GÃ©nÃ©ration automatique des offres commerciales"

  # Machine de Contenu
  - file: "300_content_machine.json"
    name: "Content Machine"
    category: "marketing"
    revenue_impact: "high"
    reason: "CrÃ©ation automatique de contenu marketing"

  # Facturation Stripe Automatique
  - file: "400_invoice_stripe_auto.json"
    name: "Invoice & Stripe Auto"
    category: "finance"
    revenue_impact: "critical"
    reason: "Facturation automatique et paiements Stripe"

  # Relances ImpayÃ©s
  - file: "450_relances_impayes.json"
    name: "Relances ImpayÃ©s"
    category: "finance"
    revenue_impact: "critical"
    reason: "Recouvrement automatique des impayÃ©s"

  # Master Tracker
  - file: "999_master_tracker.json"
    name: "Master Tracker"
    category: "analytics"
    revenue_impact: "critical"
    reason: "Tracking centralisÃ© de toutes les mÃ©triques cash"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PATTERNS INTERDITS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

forbidden_patterns:
  # PrÃ©fixes numÃ©riques
  numeric_prefixes:
    - "200_"
    - "250_"
    - "300_"
    - "400_"
    - "450_"
    - "999_master"

  # Mots-clÃ©s cash
  keywords:
    - "leadgen"
    - "lead"
    - "offre"
    - "proposal"
    - "content_machine"
    - "invoice"
    - "facture"
    - "stripe"
    - "relance"
    - "impaye"
    - "cash"
    - "tracker"
    - "li_mail"
    - "proposal_auto"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ACTIONS INTERDITES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

forbidden_actions:
  - "create"       # CrÃ©er un nouveau workflow avec un nom interdit
  - "modify"       # Modifier le contenu d'un workflow existant
  - "update"       # Mettre Ã  jour la configuration
  - "delete"       # Supprimer le workflow
  - "trigger"      # DÃ©clencher manuellement l'exÃ©cution
  - "repair"       # RÃ©parer un workflow cassÃ©
  - "analyze"      # Analyser pour proposer des amÃ©liorations
  - "propose"      # Proposer des modifications

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PROCÃ‰DURE EN CAS DE VIOLATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

violation_procedure:
  1_immediate_action:
    - "ArrÃªter immÃ©diatement l'opÃ©ration"
    - "Refuser l'exÃ©cution avec message d'erreur explicite"
    - "Logger l'incident dans SystemJournal avec niveau CRITICAL"

  2_alert:
    - "Envoyer une alerte Telegram Ã  Matthieu"
    - "Format: ğŸš¨ ALERTE SÃ‰CURITÃ‰ PROLEX â€” Tentative d'accÃ¨s Ã  [nom_workflow]"
    - "Inclure: timestamp, action tentÃ©e, contexte"

  3_logging:
    - "Log dans SystemJournal avec champs:"
    - "  event: cash_workflow_violation_attempt"
    - "  severity: CRITICAL"
    - "  alert_type: TELEGRAM"
    - "  workflow_name: [nom]"
    - "  action: [action tentÃ©e]"
    - "  matched_patterns: [patterns dÃ©tectÃ©s]"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# AUTORISATIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

authorized_personnel:
  - name: "Matthieu"
    role: "Owner / Administrator"
    permissions: "FULL"
    context: "Seul autorisÃ© Ã  modifier les workflows cash"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# EXCEPTIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

exceptions:
  # Aucune exception autorisÃ©e
  # Si modification nÃ©cessaire â†’ demander Ã  Matthieu
  allowed: []
  note: "Aucune exception. Toute modification nÃ©cessite l'intervention de Matthieu."

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# MAINTENANCE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

maintenance:
  last_updated: "2025-11-22"
  update_frequency: "As needed when adding new cash workflows"
  owner: "Matthieu"
  review_date: "2026-01-01"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# NOTES TECHNIQUES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

technical_implementation:
  location: "mcp/n8n-server/src/security/cashWorkflowGuard.ts"
  enforcement_points:
    - "tools/index.ts â†’ createWorkflow()"
    - "tools/index.ts â†’ updateWorkflow()"
    - "tools/index.ts â†’ triggerWorkflow()"
  logging: "logging/systemJournal.ts"
  alert_system: "Telegram (via SystemJournal)"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# TESTS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

test_scenarios:
  - scenario: "Tentative de crÃ©ation d'un workflow avec pattern interdit"
    expected: "Erreur + Alerte Telegram"
  - scenario: "Tentative de modification d'un workflow cash existant"
    expected: "Erreur + Alerte Telegram"
  - scenario: "Tentative de trigger manuel d'un workflow cash"
    expected: "Erreur + Alerte Telegram"
  - scenario: "CrÃ©ation d'un workflow lÃ©gitime (non-cash)"
    expected: "SuccÃ¨s sans alerte"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# FIN DU FICHIER
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
